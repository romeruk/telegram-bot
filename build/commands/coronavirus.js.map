{"version":3,"sources":["../../src/commands/coronavirus.js"],"names":["coronaVirus","bot","command","ctx","axios","get","timeout","response","data","results","confirmedCount","deadCount","curedCount","updateTime","date","console","log","reply","parse_mode"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAS;AAC3BA,EAAAA,GAAG,CAACC,OAAJ,CAAY,aAAZ,EAA2B,8BAA3B;AAAA;AAAA;AAAA;AAAA;AAAA,4BAA+C,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAMpBC,kBAAMC,GAAN,CAAU,yCAAV,EAAqD;AAC1EC,gBAAAA,OAAO,EAAE,KAAK;AAD4D,eAArD,CANoB;;AAAA;AAMrCC,cAAAA,QANqC;AAAA,sCAUmBA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsB,CAAtB,CAVnB,EAUnCC,cAVmC,yBAUnCA,cAVmC,EAUnBC,SAVmB,yBAUnBA,SAVmB,EAURC,UAVQ,yBAURA,UAVQ,EAUIC,UAVJ,yBAUIA,UAVJ;AAYrCC,cAAAA,IAZqC,GAY9B,sBAAWD,UAAX,CAZ8B;AAa3CE,cAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AAb2C,+CAepCX,GAAG,CAACc,KAAJ,iHAAmCP,cAAnC,uGAA6EC,SAA7E,qIAAuHC,UAAvH,WAAyI;AAC9IM,gBAAAA,UAAU,EAAE;AADkI,eAAzI,CAfoC;;AAAA;AAAA;AAAA;AAmB3CH,cAAAA,OAAO,CAACC,GAAR;;AAnB2C;AAAA,+CAsBtCb,GAAG,CAACc,KAAJ,CAAU,oBAAV,CAtBsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA/C;;AAAA;AAAA;AAAA;AAAA;AAwBD,CAzBD;;eA2BejB,W","sourcesContent":["import axios from 'axios';\r\nimport { limitsMiddleware } from '../Middleware/index';\r\nimport { formatDate } from '../helpers/math';\r\n\r\nconst coronaVirus = (bot) => {\r\n  bot.command(\"coronavirus\", limitsMiddleware(), async (ctx) => {\r\n    try {\r\n      // const response = await axios.get(\"https://www.worldometers.info/coronavirus/\");\r\n      // const $ = cheerio.load(response.data);\r\n      // const [confirmed = 0, deaths = 0, recovered = 0] = Array.from($('.maincounter-number'));\r\n      // const data = $(\"#page-top\").next().text();\r\n      const response = await axios.get(\"http://lab.isaaclin.cn/nCoV/api/overall\", {\r\n        timeout: 20 * 1000\r\n      });\r\n\r\n      const { confirmedCount, deadCount, curedCount, updateTime } = response.data.results[0];\r\n\r\n      const date = formatDate(updateTime);\r\n      console.log(date);\r\n\r\n      return ctx.reply(`Всього заразилось: <b>${confirmedCount}</b>\\nВсього померло: <b>${deadCount}</b>\\nВсього вилікувалось: <b>${curedCount}</b>`, {\r\n        parse_mode: \"HTML\"\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    return ctx.reply(\"error getting data\");\r\n  });\r\n};\r\n\r\nexport default coronaVirus;"],"file":"coronavirus.js"}